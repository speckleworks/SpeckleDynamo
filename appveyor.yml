# General Configuration
version: '{build}'

# Environment Configuration
image: Visual Studio 2017
cache:
  - '%LocalAppData%\NuGet\v3-cache'

install:
  #init and update submodules
  - git submodule update --recursive --init


# Build Configuration
platform: Any CPU
configuration: Release

before_build:
  - nuget restore

build:
  project: SpeckleDynamo.sln
  verbosity: minimal

after_build:
  # zip everything into a zip file containing package folder structure
  - 7z a SpeckleDynamo-%APPVEYOR_BUILD_VERSION%.zip %APPVEYOR_BUILD_FOLDER%\SpeckleDynamo\bin\Release\SpeckleDynamo\*

artifacts:
  path: SpeckleDynamo-%APPVEYOR_BUILD_VERSION%.zip
  name: Release